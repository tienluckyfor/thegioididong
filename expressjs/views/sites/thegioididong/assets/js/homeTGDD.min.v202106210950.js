function SetAllContentAttr(){var n=$("ul.dongho-tab li.act"),t=n.closest(".dongho").find(".dongho__content:not([data-cate-id]):not([data-prop-id]):not([data-html-id])");t!=null&&(n.data("cate-id")!=null&&t.attr("data-cate-id",n.data("cate-id")),n.data("prop-id")!=null&&t.attr("data-prop-id",n.data("prop-id")),n.data("html-id")!=null&&t.attr("data-html-id",n.data("html-id")))}function InitCarousel(){$(".slider-banner").owlCarousel({items:1,loop:!0,dots:!0,margin:5,autoplay:!0,autoplayTimeout:1e4,autoplayHoverPause:!0,lazyLoad:!0,autoHeight:!0});$(".game-slider").owlCarousel({items:1,loop:!0,dots:!0,autoHeight:!0,lazyLoad:!0})}function InitOwlCarousel(){function f(t){var r=t.item.count-1,i=Math.round(t.item.index-t.item.count/2-.5);i<0&&(i=r);i>r&&(i=0);n.find(".owl-item").removeClass("synced").eq(i).addClass("synced");var u=n.find(".owl-item.active").length-1,f=n.find(".owl-item.active").first().index(),e=n.find(".owl-item.active").last().index();i>e&&n.data("owl.carousel").to(i,100,!0);i<f&&n.data("owl.carousel").to(i-u,100,!0)}function e(n){if(u){var i=n.item.index;t.data("owl.carousel").to(i,100,!0)}}var i=$(".homebanner"),t=i.find("#sync1"),n=i.find("#sync2"),r=5,u=!1;t.owlCarousel({items:1,slideSpeed:5e3,autoplayHoverPause:!0,nav:!0,autoplay:!0,loop:!0,dots:!1,responsiveRefreshRate:200}).on("changed.owl.carousel",f);n.on("initialized.owl.carousel",function(){n.find(".owl-item").eq(0).addClass("synced")}).owlCarousel({items:r,nav:!1,smartSpeed:200,slideSpeed:500,slideBy:r,dots:!1,responsiveRefreshRate:100}).on("changed.owl.carousel",e);n.on("click",".owl-item",function(n){n.preventDefault();var i=$(this).index();t.data("owl.carousel").to(i,300,!0)});$(".slider-promo").owlCarousel({nav:!0,items:5,slideBy:"page",rewind:!0,dots:!1,margin:10,smartSpeed:100});$(".trademark-slider, .product-news-slider").owlCarousel({nav:!0,items:3,dots:!1,margin:10,rewind:!0});$(".game-slider").owlCarousel({nav:!0,items:1,dots:!1,rewind:!0});$(".slider-home").owlCarousel({nav:!0,items:5,dots:!1,smartSpeed:100,slideBy:"page",rewind:!0});InitProductOwlCarousel($(".slider-dongho"))}function InitProductOwlCarousel(n){n.owlCarousel({nav:!0,items:4,slideBy:"page",rewind:!0,dots:!1,smartSpeed:100})}function LoadAllCategoryStatistic(){$.ajax({url:"/Home/GetAllCategoryStatistic",type:"POST",dataType:"json",cache:!0,success:function(n){n.code==200&&(LoadCateInfo(0,"",$(".readmore-btn.accessory"),n.data.accessory),LoadCateInfo(0,"",$(".readmore-arrow.smart-watch, .readmore-btn.smart-watch"),n.data.smartwatch))}})}function LoadCateInfo(n,t,i,r=0){if((r==null||r==0)&&(r=GetCategoryStatistic(n,t)),i.length>0){var u=i.html();i.html(u.replace("Xem táº¥t cáº£","Xem táº¥t cáº£ <b>"+r+"<\/b>"))}}function GetCategoryStatistic(n,t){var i=0,r=[],u;return t!=null&&(r=JSON.parse("["+t+"]")),u={categoryId:n,propertyIds:r},$.ajax({url:"/Home/GetCategoryStatistic",data:u,type:"POST",dataType:"text",cache:!0,async:!1,success:function(n){n!=null&&(i=n)}}),i}$(document).ready(function(){isMobile?InitCarousel():InitOwlCarousel();LoadViewedHistory();LoadAllCategoryStatistic();SetAllContentAttr();$("ul.dongho-tab li").click(function(){var t=$(this),e,o;if(t.hasClass("act"))return!1;var f=$(".dongho").find(".preloader"),r=t.data("html-id"),u=t.data("cate-id"),s=t.data("cate-name"),i=t.data("prop-id"),n=$(".dongho__content"+(u!=null?"[data-cate-id="+u+"]":":not([data-cate-id])")+(i!=null?'[data-prop-id="'+i+'"]':":not([data-prop-id])")+(r!=null?'[data-html-id="'+r+'"]':":not([data-html-id])"));if(n!=null&&n.length>0)return $("ul.dongho-tab li").removeClass("act"),t.addClass("act"),$(".dongho__content").hide(),n.show(),!1;e=[];i!=null&&(e=JSON.parse("["+i+"]"));o={categoryId:u,htmlId:r,propertyIds:e};$.ajax({url:"/Home/GetListProduct",data:o,method:"POST",beforeSend:function(){$("ul.dongho-tab li").removeClass("act");t.addClass("act");f.show()},success:function(t){$(".dongho__content").hide();$(".dongho-show").append(t);n=$(".dongho__content").last();u!=null&&n.attr("data-cate-id",u);i!=null&&n.attr("data-prop-id",i);r!=null&&n.attr("data-html-id",r);isMobile||InitProductOwlCarousel(n.find(".slider-dongho"));f.hide()},error:function(){f.hide()}})})});